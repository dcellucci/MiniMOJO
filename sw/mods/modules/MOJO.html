{"modules":{"0.888448372545418":{"definition":"//\n// string variables\n//\n// Neil Gershenfeld \n// (c) Massachusetts Institute of Technology 2016\n// \n// This work may be reproduced, modified, distributed, performed, and \n// displayed for any purpose, but must acknowledge the mods\n// project. Copyright is retained and must be preserved. The work is \n// provided as is; no warranty is provided, and users accept all \n// liability.\n//\n// closure\n//\n(function(){\n//\n// module globals\n//\nvar mod = {}\n//\n// name\n//\nvar name = 'string variables'\n//\n// initialization\n//\nvar init = function() {\n   mod.text1.value = 'value 1'\n   mod.text2.value = 'value 2'\n   }\n//\n// inputs\n//\nvar inputs = {\n   var1:{type:'string',\n      event:function(evt){\n         mod.text1.value = evt.detail\n         outputs.var1.event()}},\n   var2:{type:'string',\n      event:function(evt){\n         mod.text2.value = evt.detail\n         outputs.var2.event()}}}\n//\n// outputs\n//\nvar outputs = {\n   var1:{type:'string',\n      event:function(){\n         mods.output(mod,'var1',mod.text1.value)}},\n   var2:{type:'string',\n      event:function(){\n         mods.output(mod,'var2',mod.text2.value)}}}\n//\n// interface\n//\nvar interface = function(div){\n   mod.div = div\n   div.appendChild(document.createTextNode('var1: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 6\n      input.addEventListener('keydown',function(evt){\n         if (evt.key == 'Enter')\n            outputs.var1.event()\n         })\n      div.appendChild(input)\n      mod.text1 = input\n   div.appendChild(document.createTextNode(' (enter)'))\n   div.appendChild(document.createElement('br'))\n   div.appendChild(document.createTextNode('var2: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 6\n      input.addEventListener('keydown',function(evt){\n         if (evt.key == 'Enter')\n            outputs.var2.event()\n         })\n      div.appendChild(input)\n      mod.text2 = input\n   div.appendChild(document.createTextNode(' (enter)'))\n   }\n//\n// local functions\n//\n;\n//\n// return values\n//\nreturn ({\n   name:name,\n   init:init,\n   inputs:inputs,\n   outputs:outputs,\n   interface:interface\n   })\n}())\n","top":"255","left":"694","inputs":{},"outputs":{}},"0.18879595869754584":{"definition":"//\n// MOJO Control\n//\n// \n// This work may be reproduced, modified, distributed, performed, and \n// displayed for any purpose, but must acknowledge the mods\n// project. Copyright is retained and must be preserved. The work is \n// provided as is; no warranty is provided, and users accept all \n// liability.\n//\n// closure\n//\n(function(){\n//\n// module globals\n//\nvar mod = {}\n//\n// name\n//\nvar name = 'MOJO Control'\n//\n// initialization\n//\nvar init = function() {\n   }\n//\n// inputs\n//\nvar inputs = {\n   input:{type:'character',\n      event:function(evt){\n         var str = evt.detail\n         mod.character.value = str.slice(-1)\n         outputs.output.event()\n         }}}\n//\n// outputs\n//\nvar outputs = {\n   output:{type:'string',\n      event:function(){\n         mods.output(mod,'output',mod.value)}}}\n//\n// interface\n//\n\n\nvar interface = function(div){\n   mod.motorvals = new Array\n   mod.div = div\n   div.appendChild(document.createTextNode('Motor 1: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 1\n   div.appendChild(input)\n   mod.motorvals.push(input)\n   div.appendChild(document.createElement('br'))\n\n   div.appendChild(document.createTextNode('Motor 2: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 1\n   div.appendChild(input)\n   mod.motorvals.push(input)\n   div.appendChild(document.createElement('br'))\n\n   div.appendChild(document.createTextNode('Motor 3: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 1\n   div.appendChild(input)\n   mod.motorvals.push(input)\n   div.appendChild(document.createElement('br'))\n\n   div.appendChild(document.createTextNode('Motor 4: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 1\n   div.appendChild(input)\n   mod.motorvals.push(input)\n   div.appendChild(document.createElement('br'))\n   \n   div.appendChild(document.createTextNode('Motor 5: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 1\n   div.appendChild(input)\n   mod.motorvals.push(input)\n   div.appendChild(document.createElement('br'))  \n\n   var btn = document.createElement('button')\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('send'))\n      btn.addEventListener('click', parseMotVals)\n   div.appendChild(btn)         \n   }\n\n\n\n//\n// local functions\n//\nfunction parseMotVals(){\n   mod.value = 'w'\n   for(motorval in mod.motorvals){\n      if(mod.motorvals[motorval].value > 255){\n         motbyte = String.fromCharCode(255)\n      }\n      else{\n         motbyte = String.fromCharCode(mod.motorvals[motorval].value)\n      }\n      mod.value = mod.value + motbyte\n   }\n   outputs.output.event()\n}\n//\n// return values\n//\nreturn ({\n   name:name,\n   init:init,\n   inputs:inputs,\n   outputs:outputs,\n   interface:interface\n   })\n}())\n","top":"277","left":"187","inputs":{},"outputs":{}},"0.3966762541179696":{"definition":"//\n// serial server module\n//\n// Neil Gershenfeld \n// (c) Massachusetts Institute of Technology 2016\n// \n// This work may be reproduced, modified, distributed, performed, and \n// displayed for any purpose, but must acknowledge the mods\n// project. Copyright is retained and must be preserved. The work is \n// provided as is; no warranty is provided, and users accept all \n// liability.\n//\n// closure\n//\n(function(){\n//\n// module globals\n//\nvar mod = {}\n//\n// name\n//\nvar name = 'WebSocket serial'\n//\n// initialization\n//\nvar init = function() {\n   mod.address.value = '127.0.0.1'\n   mod.port.value = 1234\n   mod.device.value = 'tty.usbserial-A105BQJM'\n   mod.baud.value = 9600\n   mod.flow_rtscts.checked = true\n   mod.socket = null\n   socket_open()\n   }\n//\n// inputs\n//\nvar inputs = {\n   transmit:{type:'string',\n      event:function(evt){\n         serial_send_string(evt.detail)\n         }\n      },\n   file:{type:'object',\n      event:function(evt){\n         if (evt.detail.type == 'command') {\n            mod.command = evt.detail\n            socket_send(JSON.stringify(mod.command))\n            }\n         else if (evt.detail.type == 'file') {\n            mod.job = evt.detail\n            mod.job.type = 'file'\n            mod.label.nodeValue = 'send file'\n            mod.labelspan.style.fontWeight = 'bold'\n            }\n         }}}\n//\n// outputs\n//\nvar outputs = {\n   receive:{type:'string',\n      event:function(str){\n         mods.output(mod,'receive',str)}}}\n//\n\n//\n// interface\n//\nvar interface = function(div){\n   mod.div = div\n   //\n   // server\n   //\n   div.appendChild(document.createTextNode('serialserver:'))\n   div.appendChild(document.createElement('br'))\n   //\n   // open/close\n   //\n   var btn = document.createElement('button')\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('open'))\n      btn.addEventListener('click',function() {\n         socket_open()\n         })\n      div.appendChild(btn)\n   var btn = document.createElement('button')\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('close'))\n      btn.addEventListener('click',function() {\n         socket_close()\n         })\n      div.appendChild(btn)\n   div.appendChild(document.createElement('br'))\n   //\n   // address\n   //\n   div.appendChild(document.createTextNode('address: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 10\n      div.appendChild(input)\n      mod.address = input\n   div.appendChild(document.createElement('br'))\n   //\n   // port\n   //\n   div.appendChild(document.createTextNode('\\u00a0\\u00a0\\u00a0\\u00a0\\u00a0port: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 10\n      div.appendChild(input)\n      mod.port = input\n   div.appendChild(document.createElement('br'))\n   //\n   // status\n   //\n   div.appendChild(document.createTextNode('\\u00a0\\u00a0status: '))\n   input = document.createElement('input')\n      input.type = 'text'\n      input.size = 10\n      div.appendChild(input)\n      mod.status = input\n   div.appendChild(document.createElement('br'))\n   //\n   // serial\n   //\n   div.appendChild(document.createTextNode('serial device:'))\n   div.appendChild(document.createElement('br'))\n   //\n   // open/close\n   //\n   var btn = document.createElement('button')\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('open'))\n      btn.addEventListener('click',function() {\n         serial_open()\n         })\n      div.appendChild(btn)\n   var btn = document.createElement('button')\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('close'))\n      btn.addEventListener('click',function() {\n         serial_close()\n         })\n      div.appendChild(btn)\n   div.appendChild(document.createElement('br'))\n   //\n   // device\n   //\n   div.appendChild(document.createTextNode('/dev/'))\n   var input = document.createElement('input')\n      input.type = 'text'\n      input.size = 10\n      div.appendChild(input)\n      mod.device = input\n   div.appendChild(document.createElement('br'))   \n   //\n   // baud rate\n   //\n   div.appendChild(document.createTextNode('baud rate:'))\n   div.appendChild(document.createElement('br'))   \n   var input = document.createElement('input')\n      input.type = 'text'\n      input.size = 10\n      div.appendChild(input)\n      mod.baud = input\n   div.appendChild(document.createElement('br'))   \n   //\n   // flow control\n   //\n   div.appendChild(document.createTextNode('flow control:'))\n   div.appendChild(document.createElement('br'))   \n   var input = document.createElement('input')\n      input.type = 'radio'\n      input.name = mod.div.id+'flow'\n      input.id = mod.div.id+'flow_none'\n      div.appendChild(input)\n      mod.flow_none = input\n   div.appendChild(document.createTextNode('none\\u00A0\\u00A0\\u00A0\\u00A0'))\n   div.appendChild(document.createElement('br'))   \n   var input = document.createElement('input')\n      input.type = 'radio'\n      input.name = mod.div.id+'flow'\n      input.id = mod.div.id+'flow_rtscts'\n      div.appendChild(input)\n      mod.flow_rtscts = input\n   div.appendChild(document.createTextNode('RTSCTS'))\n   div.appendChild(document.createElement('br'))   \n   var input = document.createElement('input')\n      input.type = 'radio'\n      input.name = mod.div.id+'flow'\n      input.id = mod.div.id+'flow_dsrdtr'\n      div.appendChild(input)\n      input.disabled = true\n      mod.flow_dsrdtr = input\n   div.appendChild(document.createTextNode('DSRDTR'))\n   div.appendChild(document.createElement('br'))   \n   //\n   // file button\n   //\n   var btn = document.createElement('button')\n      btn.style.padding = mods.ui.padding\n      btn.style.margin = 1\n      var span = document.createElement('span')\n         var text = document.createTextNode('waiting for file')\n            mod.label = text\n            span.appendChild(text)\n         mod.labelspan = span\n         btn.appendChild(span)\n      btn.addEventListener('click',function(){\n         if (mod.socket == null) {\n            mod.status.value = \"can't send, not open\"\n            }\n         else if (mod.label.nodeValue == 'send file') {\n            socket_send(JSON.stringify(mod.job))\n            mod.label.nodeValue = 'cancel'\n            }\n         else if (mod.label.nodeValue == 'cancel') {\n            mod.command = {}\n            mod.command.type = 'cancel'\n            socket_send(JSON.stringify(mod.command))\n            }\n         })\n      div.appendChild(btn)\n   }\n//\n// local functions\n//\nfunction socket_open() {\n   var url = \"ws://\"+mod.address.value+':'+mod.port.value\n   mod.socket = new WebSocket(url)\n   mod.socket.onopen = function(event) {\n      mod.status.value = \"socket opened\"\n      serial_open()\n      }\n   mod.socket.onerror = function(event) {\n      mod.status.value = \"can not open\"\n      mod.socket = null\n      }\n   mod.socket.onmessage = function(event) {\n      mod.status.value = event.data\n      outputs.receive.event(event.data)\n      if ((event.data == 'done') || (event.data == 'cancel') || (event.data.slice(0,5) == 'error')) {\n         mod.label.nodeValue = 'waiting for file'\n         mod.labelspan.style.fontWeight = 'normal'\n         }\n      }\n   }\nfunction socket_close() {\n   var msh = {}\n   msg.type = 'close'\n   mod.socket.send(JSON.stringify(msg))\n   mod.socket.close()\n   mod.status.value = \"socket closed\"\n   mod.socket = null\n   }\nfunction socket_send(msg) {\n   if (mod.socket != null) {\n      mod.status.value = \"send\"\n      mod.socket.send(msg)\n      }\n   else {\n      mod.status.value = \"can't send, not open\"\n      }\n   }\nfunction serial_open() {\n   if (mod.socket == null) {\n      mod.status.value = \"socket not open\"\n      }\n   else {\n      var msg = {}\n      msg.type = 'open'\n      msg.device = mod.device.value\n      msg.baud = mod.baud.value\n      msg.contents = \"start\"\n      if (mod.flow_none.checked)\n         msg.flow = 'none'\n      else if (mod.flow_rtscts.checked)\n         msg.flow = 'rtscts'\n      else if (mod.flow_dsrdtr.checked)\n         msg.flow = 'dsrdtr'\n      mod.socket.send(JSON.stringify(msg))\n      }\n   }\nfunction serial_close() {\n   if (mod.socket == null) {\n      mod.status.value = \"socket not open\"\n      }\n   else {\n      var msg = {}\n      msg.type = 'close'\n      msg.device = mod.device.value\n      mod.socket.send(JSON.stringify(msg))\n      }\n   }\nfunction serial_send_string(str) {\n   if (mod.socket == null) {\n      mod.status.value = \"socket not open\"\n      }\n   else {\n      var msg = {}\n      msg.type = 'string'\n      msg.string = str\n      mod.socket.send(JSON.stringify(msg))\n      mod.status.value = 'transmit'\n      }\n   }\n//\n// return values\n//\nreturn ({\n   name:name,\n   init:init,\n   inputs:inputs,\n   outputs:outputs,\n   interface:interface\n   })\n}())\n","top":"360","left":"1185","inputs":{},"outputs":{}},"0.009849633090649124":{"definition":"//\n// MOJO Motor Control\n//\n// \n// This work may be reproduced, modified, distributed, performed, and \n// displayed for any purpose, but must acknowledge the mods\n// project. Copyright is retained and must be preserved. The work is \n// provided as is; no warranty is provided, and users accept all \n// liability.\n//\n// closure\n//\n(function(){\n//\n// module globals\n//\nvar mod = {}\n//\n// name\n//\nvar name = 'Toggle Led'\n//\n// initialization\n//\nvar init = function() {\n   }\n//\n// inputs\n//\nvar inputs = {\n   input:{type:'character',\n      event:function(evt){\n         var str = evt.detail\n         mod.character.value = str.slice(-1)\n         outputs.output.event()\n         }}}\n//\n// outputs\n//\nvar outputs = {\n   output:{type:'string',\n      event:function(){\n         mods.output(mod,'output',mod.value)}}}\n//\n// interface\n//\n\n\nvar interface = function(div){\n   mod.motorvals = new Array\n   mod.div = div\n   div.appendChild(document.createTextNode('Bridge LED'))\n   div.appendChild(document.createElement('br'))\n   input = document.createElement('div')\n      color = 'black'\n      if(bridge_led_on){\n         color = 'red'\n      }\n      input.style = 'background:'+color+'; border-radius: 25px; width: 50px; height: 50px;'\n   div.appendChild(input)\n   mod.motorvals.push(input)\n   div.appendChild(document.createElement('br'))\n\n   div.appendChild(document.createTextNode('Coord. LED'))   \n   div.appendChild(document.createElement('br'))\n\n   input = document.createElement('div')\n      color = 'black'\n      if(bridge_led_on){\n         color = 'red'\n      }\n      input.style = 'background:'+color+'; border-radius: 25px; width: 50px; height: 50px;'\n    div.appendChild(input)\n   mod.motorvals.push(input)\n   div.appendChild(document.createElement('br'))\n\n   var btn = document.createElement('button')\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('Toggle Coord. LED'))\n      btn.addEventListener('click', parseMotVals)\n   div.appendChild(btn)         \n   }\n\n\n\n//\n// local functions\n//\nfunction parseMotVals(){\n   mod.value = 'w'\n   for(motorval in mod.motorvals){\n      if(mod.motorvals[motorval].value > 255){\n         motbyte = String.fromCharCode(255)\n      }\n      else{\n         motbyte = String.fromCharCode(mod.motorvals[motorval].value)\n      }\n      mod.value = mod.value + motbyte\n   }\n   outputs.output.event()\n}\n//\n// return values\n//\nreturn ({\n   name:name,\n   init:init,\n   inputs:inputs,\n   outputs:outputs,\n   interface:interface\n   })\n}())\n","top":"84","left":"194","inputs":{},"outputs":{}},"0.09022831574732137":{"definition":"//\n// MOJO Motor Control\n//\n// \n// This work may be reproduced, modified, distributed, performed, and \n// displayed for any purpose, but must acknowledge the mods\n// project. Copyright is retained and must be preserved. The work is \n// provided as is; no warranty is provided, and users accept all \n// liability.\n//\n// closure\n//\n(function(){\n//\n// module globals\n//\nvar mod = {}\nmod.bridge_led_col = 'red'\nmod.coord_led_col = 'red'\n//\n// name\n//\nvar name = 'Toggle Led'\n//\n// initialization\n//\nvar init = function() {\n   }\n//\n// inputs\n//\nvar inputs = {\n   input:{type:'character',\n      event:function(evt){\n         var str = evt.detail\n         mod.character.value = str.slice(-1)\n         outputs.output.event()\n         }}}\n//\n// outputs\n//\nvar outputs = {\n   output:{type:'string',\n      event:function(){\n         mods.output(mod,'output',mod.value)}}}\n//\n// interface\n//\n\n\nvar interface = function(div){\n   mod.div = div\n   div.appendChild(document.createTextNode('Bridge LED'))\n   div.appendChild(document.createElement('br'))\n   input = document.createElement('div')\n      input.style = 'background:'+mod.coord_led_col+'; border-radius: 25px; width: 50px; height: 50px;'\n   div.appendChild(input)\n   div.appendChild(document.createElement('br'))   \n\n   var btn = document.createElement('button')\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('Toggle Bridge. LED'))\n      btn.addEventListener('click', sendBridgeToggle)\n   div.appendChild(btn)         \n\n   div.appendChild(document.createTextNode('Coord. LED'))   \n   div.appendChild(document.createElement('br'))\n\n   input = document.createElement('div')\n      input.style = 'background:'+mod.bridge_led_col+'; border-radius: 25px; width: 50px; height: 50px;'\n    div.appendChild(input)\n   div.appendChild(document.createElement('br'))\n\n   var btn = document.createElement('button')\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('Toggle Coord. LED'))\n      btn.addEventListener('click', sendCoordToggle)\n   div.appendChild(btn)         \n   }\n\n\n\n//\n// local functions\n//\nfunction sendBridgeToggle(){\n   if(mod.bridge_led_col == 'black'){\n      mod.bridge_led_col = 'red'\n   }\n   else{\n      mod.bridge_led_col = 'black'\n   }\n\n   mod.value = 'l'\n   outputs.output.event()\n}\nfunction sendCoordToggle(){\n   if(mod.coord_led_col == 'black'){\n      mod.coord_led_col = 'red'\n   }\n   else{\n      mod.coord_led_col = 'black'\n   }\n   mod.value = '!l'\n   outputs.output.event()\n}\n//\n// return values\n//\nreturn ({\n   name:name,\n   init:init,\n   inputs:inputs,\n   outputs:outputs,\n   interface:interface\n   })\n}())\n","top":"546","left":"211","inputs":{},"outputs":{}},"0.4554360109622254":{"definition":"//\n// ui button\n//\n// Neil Gershenfeld \n// (c) Massachusetts Institute of Technology 2015,6\n// \n// This work may be reproduced, modified, distributed, performed, and \n// displayed for any purpose, but must acknowledge the mods\n// project. Copyright is retained and must be preserved. The work is \n// provided as is; no warranty is provided, and users accept all \n// liability.\n//\n// closure\n//\n(function(){\n//\n// module globals\n//\nvar mod = {}\n//\n// name\n//\nvar name = 'UI button'\n//\n// initialization\n//\nvar init = function() {\n   openUI()\n   }\n//\n// inputs\n//\nvar inputs = {\n   }\n//\n// outputs\n//\nvar outputs = {\n   button1:{type:\"event\",\n      label:\"button 1\",\n      event:function(){\n         mods.output(mod,\"button1\",\"button 1\")}},\n   button2:{type:\"event\",\n      label:\"button 2\",\n      event:function(){\n         mods.output(mod,\"button2\",\"button 2\")}}}\n//\n// interface\n//\nvar interface = function(div){\n   mod.div = div\n   //\n   // view UI\n   //\n   var btn = document.createElement('button')\n      btn.style.padding = mods.ui.padding\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('view window'))\n      btn.addEventListener('click',function(){\n         openUI()\n         })\n      div.appendChild(btn)\n   }\n//\n// local functions\n//\nfunction openUI() {\n   var win = window.open('')\n   //\n   // close\n   //\n   var btn = document.createElement('button')\n      btn.appendChild(document.createTextNode('close window'))\n      btn.style.padding = mods.ui.padding\n      btn.style.margin = 1\n      btn.addEventListener('click',function(){\n         win.close()\n         })\n      win.document.body.appendChild(btn)\n   win.document.body.appendChild(document.createElement('br'))\n   win.document.body.appendChild(document.createElement('br'))\n   //\n   // button 1\n   //\n   var btn = document.createElement('button')\n      btn.appendChild(document.createTextNode('button 1'))\n      btn.style.padding = mods.ui.padding\n      btn.style.margin = 1\n      btn.addEventListener('click',function(){\n         outputs.button1.event()\n         })\n      win.document.body.appendChild(btn)\n   win.document.body.appendChild(document.createTextNode(' '))\n   //\n   // button 2\n   //\n   var btn = document.createElement('button')\n      btn.appendChild(document.createTextNode('button 2'))\n      btn.style.padding = mods.ui.padding\n      btn.style.margin = 1\n      btn.addEventListener('click',function(){\n         outputs.button2.event()\n         })\n      win.document.body.appendChild(btn)\n   }\n//\n// return values\n//\nreturn ({\n   name:name,\n   init:init,\n   inputs:inputs,\n   outputs:outputs,\n   interface:interface\n   })\n}())\n","top":"108","left":"941","inputs":{},"outputs":{}},"0.6750965876483602":{"definition":"//\n// ui text\n//\n// Neil Gershenfeld \n// (c) Massachusetts Institute of Technology 2015,6\n// \n// This work may be reproduced, modified, distributed, performed, and \n// displayed for any purpose, but must acknowledge the mods\n// project. Copyright is retained and must be preserved. The work is \n// provided as is; no warranty is provided, and users accept all \n// liability.\n//\n// closure\n//\n(function(){\n//\n// module globals\n//\nvar mod = {}\n//\n// name\n//\nvar name = 'UI text'\n//\n// initialization\n//\nvar init = function() {\n   openUI()\n   }\n//\n// inputs\n//\nvar inputs = {\n   text1:{type:\"String\",\n      label:\"text 1\",\n      event:function(evt){\n         mod.text1.value = evt.detail\n         outputs.text1.event()}},\n   text2:{type:\"String\",\n      label:\"text 2\",\n      event:function(evt){\n         mod.text2.value = evt.detail\n         outputs.text2.event()}}}\n//\n// outputs\n//\nvar outputs = {\n   text1:{type:\"event\",\n      label:\"text 1\",\n      event:function(){\n         mods.output(mod,\"text1\",mod.text1.value)}},\n   text2:{type:\"event\",\n      label:\"text 2\",\n      event:function(){\n         mods.output(mod,\"text2\",mod.text2.value)}}}\n//\n// interface\n//\nvar interface = function(div){\n   mod.div = div\n   //\n   // view UI\n   //\n   var btn = document.createElement('button')\n      btn.style.padding = mods.ui.padding\n      btn.style.margin = 1\n      btn.appendChild(document.createTextNode('view window'))\n      btn.addEventListener('click',function(){\n         openUI()\n         })\n      div.appendChild(btn)\n   }\n//\n// local functions\n//\nfunction openUI() {\n   var win = window.open('')\n   //\n   // close\n   //\n   var btn = document.createElement('button')\n      btn.appendChild(document.createTextNode('close window'))\n      btn.style.padding = mods.ui.padding\n      btn.style.margin = 1\n      btn.addEventListener('click',function(){\n         win.close()\n         })\n      win.document.body.appendChild(btn)\n   win.document.body.appendChild(document.createElement('br'))\n   win.document.body.appendChild(document.createElement('br'))\n   //\n   // text 1\n   //\n   win.document.body.appendChild(document.createTextNode('text 1: '))\n   var input = document.createElement('input')\n      input.type = 'text'\n      input.size = 6\n      input.addEventListener('input',function(){\n         outputs.text1.event()\n         })\n      win.document.body.appendChild(input)\n      mod.text1 = input\n   win.document.body.appendChild(document.createTextNode(' (change)'))\n   win.document.body.appendChild(document.createElement('br'))\n   //\n   // text 2\n   //\n   win.document.body.appendChild(document.createTextNode('text 2: '))\n   var input = document.createElement('input')\n      input.type = 'text'\n      input.size = 6\n      input.addEventListener('change',function(){\n         outputs.text2.event()\n         })\n      win.document.body.appendChild(input)\n      mod.text2 = input\n   win.document.body.appendChild(document.createTextNode(' (enter)'))\n   }\n//\n// return values\n//\nreturn ({\n   name:name,\n   init:init,\n   inputs:inputs,\n   outputs:outputs,\n   interface:interface\n   })\n}())\n","top":"194","left":"1281","inputs":{},"outputs":{}},"0.1871289391178632":{"definition":"//\n// parallel\n//\n// Thrasyvoulos Karydis\n// Neil Gershenfeld\n// (c) Massachusetts Institute of Technology 2016\n//\n// This work may be reproduced, modified, distributed, performed, and\n// displayed for any purpose, but must acknowledge the mods\n// project. Copyright is retained and must be preserved. The work is\n// provided as is; no warranty is provided, and users accept all\n// liability.\n//\n// closure\n//\n(function () {\n//\n// module globals\n//\nvar mod = {};\n//\n// name\n//\nvar name = 'parallel';\n//\n// initialization\n//\nvar init = function () {\n    mod.terms.value = '1e8';\n    mod.threads.value = '4'\n};\n//\n// inputs\n//\nvar inputs = {\n    start: {\n        type: 'event',\n        event: function (evt) {\n            benchmark()\n        }\n    }\n};\n//\n// outputs\n//\nvar outputs = {};\n//\n// interface\n//\nvar interface = function (div) {\n    mod.div = div;\n    div.appendChild(document.createTextNode('parallel threads: '));\n    var input = document.createElement('input');\n    input.type = 'text';\n    input.size = 6;\n    div.appendChild(input);\n    mod.threads = input;\n\n    div.appendChild(document.createElement('br'));\n    div.appendChild(document.createTextNode('terms to sum: '));\n    var input = document.createElement('input');\n    input.type = 'text';\n    input.size = 6;\n    div.appendChild(input);\n    mod.terms = input;\n\n    div.appendChild(document.createElement('br'));\n    var btn = document.createElement('button');\n    btn.style.padding = mods.ui.padding;\n    btn.style.margin = 1;\n    var text = document.createTextNode('calculate pi');\n    mod.label = text;\n    btn.appendChild(text);\n    btn.addEventListener('click', function () {\n        benchmark()\n    });\n    mod.button = btn;\n    div.appendChild(btn);\n    div.appendChild(document.createElement('br'));\n    var text = document.createTextNode('value: ');\n    div.appendChild(text);\n    mod.value = text;\n    div.appendChild(document.createElement('br'));\n    var text = document.createTextNode('time (s): ');\n    div.appendChild(text);\n    mod.time = text;\n    div.appendChild(document.createElement('br'));\n    var text = document.createTextNode('Mflops: ');\n    div.appendChild(text);\n    mod.mflops = text;\n\n\n};\n//\n// local functions\n//\n//\nfunction benchmark() {\n    mod.label.nodeValue = 'calculating';\n    //\n    // Split pi computation by number of workers\n    //\n    var terms = parseFloat(mod.terms.value);\n    var threads = parseFloat(mod.threads.value);\n    var inds = [];\n    for (var k = 1; k < terms; k += (terms/threads)){\n        inds.push(k);}\n    inds.push(terms);\n    //\n    // Spawn workers\n    //\n    var finished = [];\n    var sum_pi = 0;\n\n    var st_tm = Date.now();\n    for (var i = 0; i < threads; i++) {\n        var blob = new Blob(['(' + worker.toString() + '())']);\n        var url = window.URL.createObjectURL(blob);\n        var webworker = new Worker(url);\n        webworker.addEventListener('message', function (evt) {\n            var pi = evt.data.pi;\n            finished.push('done');\n            sum_pi += pi;\n            if (finished.length == threads){\n                mod.value.nodeValue = 'value: ' + sum_pi.toFixed(6);\n                var sec = (Date.now()-st_tm)/1000;\n                mod.time.nodeValue = 'time (s): ' + sec;\n                var mflops = 5 * terms / (sec * 1e6);\n                mod.mflops.nodeValue = 'Mflops: ' + mflops.toFixed(0);\n                mod.label.nodeValue = 'calculate pi';\n                sum_pi = 0;\n                finished = [];\n            }\n            this.terminate()\n        });\n        webworker.postMessage({start: inds[i],end: inds[i+1]})\n    }\n    window.URL.revokeObjectURL(url);\n}\n\n//\n\nfunction worker() {\n    self.addEventListener('message', function (evt) {\n        var start = evt.data.start;\n        var end = evt.data.end;\n        var pi = 0;\n        var tstart = Date.now();\n        for (var term = start; term < end; ++term)\n            pi += 0.5 / ((term - 0.75) * (term - 0.25))\n        var tend = Date.now();\n        var dt = tend - tstart;\n        self.postMessage({pi: pi, dt: dt})\n    })\n}\n\n//\n// return values\n//\nreturn ({\n    name: name,\n    init: init,\n    inputs: inputs,\n    outputs: outputs,\n    interface: interface\n    })\n\n}());\n","top":"100","left":"445","inputs":{},"outputs":{}}},"links":["{\"source\":\"{\\\"id\\\":\\\"0.18879595869754584\\\",\\\"type\\\":\\\"outputs\\\",\\\"name\\\":\\\"output\\\"}\",\"dest\":\"{\\\"id\\\":\\\"0.888448372545418\\\",\\\"type\\\":\\\"inputs\\\",\\\"name\\\":\\\"var1\\\"}\"}","{\"source\":\"{\\\"id\\\":\\\"0.888448372545418\\\",\\\"type\\\":\\\"outputs\\\",\\\"name\\\":\\\"var1\\\"}\",\"dest\":\"{\\\"id\\\":\\\"0.3966762541179696\\\",\\\"type\\\":\\\"inputs\\\",\\\"name\\\":\\\"transmit\\\"}\"}","{\"source\":\"{\\\"id\\\":\\\"0.888448372545418\\\",\\\"type\\\":\\\"outputs\\\",\\\"name\\\":\\\"var2\\\"}\",\"dest\":\"{\\\"id\\\":\\\"0.3966762541179696\\\",\\\"type\\\":\\\"inputs\\\",\\\"name\\\":\\\"transmit\\\"}\"}","{\"source\":\"{\\\"id\\\":\\\"0.09022831574732137\\\",\\\"type\\\":\\\"outputs\\\",\\\"name\\\":\\\"output\\\"}\",\"dest\":\"{\\\"id\\\":\\\"0.888448372545418\\\",\\\"type\\\":\\\"inputs\\\",\\\"name\\\":\\\"var2\\\"}\"}","{\"source\":\"{\\\"id\\\":\\\"0.4554360109622254\\\",\\\"type\\\":\\\"outputs\\\",\\\"name\\\":\\\"button1\\\"}\",\"dest\":\"{\\\"id\\\":\\\"0.6750965876483602\\\",\\\"type\\\":\\\"inputs\\\",\\\"name\\\":\\\"text2\\\"}\"}"]}